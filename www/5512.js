"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5512],{5512:(w,d,s)=>{s.r(d),s.d(d,{AktivitaetenErfassenPageModule:()=>T});var u=s(9808),l=s(3075),i=s(2159),v=s(4030),k=s(5861),e=s(2096),x=s(636),b=s(4323),C=s(535),_=s(1618),p=s(9285);let m=(()=>{class a{transform(t){if(t&&"number"==typeof t)switch(t){case 1:return"sehr wenig";case 2:return"wenig";case 3:return"mittel";case 4:return"viel";case 5:return"sehr-viel";case null:case NaN:return;default:throw Error("Invalider case: "+t)}}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.\u0275\u0275definePipe({name:"aktivitaeten",type:a,pure:!0}),a})();const f=function(a,r){return{ptRed:a,ptGreen:r}};function I(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"ion-text",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"aktivitaeten"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,f,n.aktivitaetenCheckboxListe[t].number_value>3,n.aktivitaetenCheckboxListe[t].number_value<3)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,e.\u0275\u0275pipeBind1(3,4,n.aktivitaetenCheckboxListe[t].number_value))," ")}}function V(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"ion-text",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"aktivitaeten"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,f,n.aktivitaetenCheckboxListe[t].number_value<3,n.aktivitaetenCheckboxListe[t].number_value>3)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,e.\u0275\u0275pipeBind1(3,4,n.aktivitaetenCheckboxListe[t].number_value))," ")}}function L(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ion-range",15),e.\u0275\u0275listener("ionChange",function(o){e.\u0275\u0275restoreView(t);const c=e.\u0275\u0275nextContext().index;return e.\u0275\u0275nextContext(2).onValueChange(o,c)}),e.\u0275\u0275element(2,"ion-icon",16)(3,"ion-icon",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&a){const t=e.\u0275\u0275nextContext().index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.aktivitaetenCheckboxListe[t].number_value)}}function S(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ion-item")(2,"ion-label",10),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,I,4,9,"ion-text",11),e.\u0275\u0275template(5,V,4,9,"ion-text",11),e.\u0275\u0275elementStart(6,"ion-checkbox",12),e.\u0275\u0275listener("ionChange",function(o){const h=e.\u0275\u0275restoreView(t).index;return e.\u0275\u0275nextContext(2).onSelectionChange(o,h)}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,L,4,1,"ng-container",13),e.\u0275\u0275elementContainerEnd()}if(2&a){const t=r.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.aktivitaet),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.checked&&t.value!==n.translateService.instant("aktivitaet-erfassen-page.entspannung")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.checked&&t.value===n.translateService.instant("aktivitaet-erfassen-page.entspannung")),e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",t.checked)("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.checked)}}function E(a,r){if(1&a&&(e.\u0275\u0275elementStart(0,"form",4)(1,"ion-card",5)(2,"ion-card-header"),e.\u0275\u0275element(3,"ion-img",6),e.\u0275\u0275elementStart(4,"ion-card-title",7),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"ion-card-content")(8,"ion-list"),e.\u0275\u0275template(9,S,8,6,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"ion-textarea",9),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,4,"aktivitaet")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.aktivitaetenCheckboxListe),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(11,6,"aktivitaet-erfassen-page.textarea-placeholder"))}}function y(a,r){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-button",18),e.\u0275\u0275listener("click",function(){return e.\u0275\u0275restoreView(t),e.\u0275\u0275nextContext().onSubmit()}),e.\u0275\u0275elementStart(1,"ion-text",19),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()}2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"aktivitaet-erfassen-page.aktivitaeten-speichern")))}const A=[{path:"",component:(()=>{class a{constructor(t,n,o,c,h,g,F,B){this.fb=t,this.sqliteService=n,this.detailService=o,this.databaseCrudService=c,this.activatedRoute=h,this.router=g,this.toastService=F,this.translateService=B,this.aktivitaeten=[],this.aktivitaetenCheckboxListe=[{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.sport"),value:this.translateService.instant("aktivitaet-erfassen-page.sport"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.arbeit"),value:this.translateService.instant("aktivitaet-erfassen-page.arbeit"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.hausarbeit"),value:this.translateService.instant("aktivitaet-erfassen-page.hausarbeit"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.entspannung"),value:this.translateService.instant("aktivitaet-erfassen-page.entspannung"),number_value:null,checked:!1}],this.tagId=this.activatedRoute.snapshot.params.tagId,this.form=this.fb.group({aktivitaetenCheckboxListe:this.fb.array([]),aktivitaetenListe:[""],sportValue:null,arbeitValue:null,hausarbeitValue:null,entspannungValue:null}),this.onLoadCheckboxStatus()}ngOnInit(){}ngAfterViewInit(){var t=this;return(0,k.Z)(function*(){yield t.loadAktivitaeten()})()}onLoadCheckboxStatus(){const t=this.form.get("aktivitaetenCheckboxListe");this.aktivitaetenCheckboxListe.forEach(n=>{this.updateCheckControl(t,n)})}loadAktivitaeten(){this.databaseCrudService.getAktivitaetenListbyTagId(this.tagId).then(t=>(t.values&&(t.values[0].aktivitaetenNames&&(this.aktivitaetenNameListe=t.values[0].aktivitaetenNames,this.form.patchValue({aktivitaetenListe:this.aktivitaetenNameListe})),t.values[0].aktivitaetenNamesCheckboxes&&(this.aktivitaetenCheckboxListe[0].number_value=t.values[0].sportValue,this.aktivitaetenCheckboxListe[1].number_value=t.values[0].arbeitValue,this.aktivitaetenCheckboxListe[2].number_value=t.values[0].hausarbeitValue,this.aktivitaetenCheckboxListe[3].number_value=t.values[0].entspannungValue,this.form.patchValue({sportValue:t.values[0].sportValue,arbeitValue:t.values[0].arbeitValue,hausarbeitValue:t.values[0].hausarbeitValue,entspannungValue:t.values[0].entspannungValue}),this.aktivitaetenCheckboxListeArray=t.values[0].aktivitaetenNamesCheckboxes.split(","),this.aktivitaetenCheckboxListeArray.forEach(n=>{if(this.aktivitaetenCheckboxListe.find(o=>o.aktivitaet===n)){const o=this.aktivitaetenCheckboxListe.findIndex(c=>c.aktivitaet===n);this.aktivitaetenCheckboxListe[o].checked=!0}}))),this.aktivitaetenNameListe)).catch(t=>{console.log(t),this.toastService.showErrorToast(this.translateService.instant("aktivitaet-erfassen-page.error"))})}updateAktivitaeten(){this.databaseCrudService.updateAktivitaetenNames(this.tagId,this.form.value.aktivitaetenListe,this.form.value.aktivitaetenCheckboxListe,this.form.value.sportValue,this.form.value.arbeitValue,this.form.value.hausarbeitValue,this.form.value.entspannungValue).then(t=>(t.values&&(this.aktivitaetenNameListe=t.values[0].aktivitaetenNames,this.aktivitaetenCheckboxListe=t.values[0].aktivitaetenNamesCheckboxes,this.form.patchValue({aktivitaetenListe:this.aktivitaetenNameListe,sportValue:t.values[0].sportValue,arbeitValue:t.values[0].arbeitValue,hausarbeitValue:t.values[0].hausarbeitValue,entspannungValue:t.values[0].entspannungValue})),this.toastService.showSuccessToast(this.translateService.instant("aktivitaet-erfassen-page.success")),this.aktivitaetenNameListe)).catch(t=>{console.log(t),this.toastService.showErrorToast(this.translateService.instant("aktivitaet-erfassen-page.error"))})}onSelectionChange(t,n){const o=this.form.get("aktivitaetenCheckboxListe");this.aktivitaetenCheckboxListe[n].checked=t.target.checked,this.updateCheckControl(o,t.target)}updateCheckControl(t,n){n.checked?t.push(new l.FormControl(n.value)):t.controls.forEach((o,c)=>{o.value!==n.value||t.removeAt(c)})}onValueChange(t,n){switch(this.aktivitaetenCheckboxListe[n].number_value=t.detail.value,n){case 0:return this.form.patchValue({sportValue:this.aktivitaetenCheckboxListe[n].number_value});case 1:return this.form.patchValue({arbeitValue:this.aktivitaetenCheckboxListe[n].number_value});case 2:return this.form.patchValue({hausarbeitValue:this.aktivitaetenCheckboxListe[n].number_value});case 3:return this.form.patchValue({entspannungValue:this.aktivitaetenCheckboxListe[n].number_value});default:throw Error("Invalider case")}}onSubmit(){var t=this;return(0,k.Z)(function*(){yield t.updateAktivitaeten(),yield t.loadAktivitaeten(),yield t.router.navigateByUrl("/tabs/tagebuch-timeline")})()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(l.FormBuilder),e.\u0275\u0275directiveInject(x.Y),e.\u0275\u0275directiveInject(b.X),e.\u0275\u0275directiveInject(C.y),e.\u0275\u0275directiveInject(v.gz),e.\u0275\u0275directiveInject(v.F0),e.\u0275\u0275directiveInject(_.L),e.\u0275\u0275directiveInject(p.sK))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-aktivitaeten-erfassen"]],decls:13,vars:5,consts:[["slot","start"],[3,"formGroup",4,"ngIf"],[1,"ion-no-border"],["class","m-0 p-0 h-3 w-100 opacity-80","color","primary","expand","block","fill","clear","size","default",3,"click",4,"ngIf"],[3,"formGroup"],[1,"ion-flex-grow-1"],["src","assets/images/Fitness_Flatline.svg",1,"vh-25"],[1,"w-100"],[4,"ngFor","ngForOf"],["formControlName","aktivitaetenListe","id","aktivitaetenListe","required","","type","text",1,"w-100","ion-border",3,"placeholder"],[1,"pt-font-12"],["class","ion-text-end pt-font-12 pt-bold",3,"ngClass",4,"ngIf"],["slot","end",3,"checked","value","ionChange"],[4,"ngIf"],[1,"ion-text-end","pt-font-12","pt-bold",3,"ngClass"],["min","1","max","5","step","1","pin","","ticks","","snaps","",1,"pt-range-padding",3,"value","ionChange"],["slot","start","color","danger","name","sad"],["slot","end","color","secondary","name","happy"],["color","primary","expand","block","fill","clear","size","default",1,"m-0","p-0","h-3","w-100","opacity-80",3,"click"],[1,"small","pt-button-text"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.\u0275\u0275element(3,"ion-back-button"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"ion-content"),e.\u0275\u0275template(8,E,12,8,"form",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"ion-footer",2)(10,"ion-row")(11,"ion-col"),e.\u0275\u0275template(12,y,4,3,"ion-button",3),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,3,"aktivitaet-erfassen")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.form),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.form))},directives:[i.IonHeader,i.IonToolbar,i.IonButtons,i.IonBackButton,i.IonBackButtonDelegate,i.IonTitle,i.IonContent,u.NgIf,l.\u0275NgNoValidate,l.NgControlStatusGroup,l.FormGroupDirective,i.IonCard,i.IonCardHeader,i.IonImg,i.IonCardTitle,i.IonCardContent,i.IonList,u.NgForOf,i.IonItem,i.IonLabel,i.IonText,u.NgClass,i.IonCheckbox,i.BooleanValueAccessor,i.IonRange,i.SelectValueAccessor,i.IonIcon,i.IonTextarea,i.TextValueAccessor,l.NgControlStatus,l.FormControlName,l.RequiredValidator,i.IonFooter,i.IonRow,i.IonCol,i.IonButton],pipes:[p.X$,m],styles:["#ion-source[_ngcontent-%COMP%]{font-size:10px;color:#d3d3d3;line-height:1!important}.pt-range-padding[_ngcontent-%COMP%]{padding:0 60px 20px 15px!important}"]}),a})()}];let P=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[[v.Bz.forChild(A)],v.Bz]}),a})();var N=s(1511);let T=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({providers:[m],imports:[[u.CommonModule,l.FormsModule,i.IonicModule,P,p.aw,l.ReactiveFormsModule,N.m]]}),a})()}}]);