"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5512],{5512:(N,x,r)=>{r.r(x),r.d(x,{AktivitaetenErfassenPageModule:()=>m});var d=r(6895),l=r(4006),a=r(4881),h=r(2905),b=r(5861),e=r(6738),P=r(636),T=r(4323),w=r(535),B=r(1618),C=r(8490);class p{transform(t){if(t&&"number"==typeof t)switch(t){case 1:return"sehr wenig";case 2:return"wenig";case 3:return"mittel";case 4:return"viel";case 5:return"sehr-viel";case null:case NaN:return;default:throw Error("Invalider case: "+t)}}}p.\u0275fac=function(t){return new(t||p)},p.\u0275pipe=e.\u0275\u0275definePipe({name:"aktivitaeten",type:p,pure:!0});const _=function(o,t){return{ptRed:o,ptGreen:t}};function F(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"ion-text",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"aktivitaeten"),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().index,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,_,i.aktivitaetenCheckboxListe[n].number_value>3,i.aktivitaetenCheckboxListe[n].number_value<3)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,e.\u0275\u0275pipeBind1(3,4,i.aktivitaetenCheckboxListe[n].number_value))," ")}}function M(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"ion-text",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"aktivitaeten"),e.\u0275\u0275elementEnd()),2&o){const n=e.\u0275\u0275nextContext().index,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,_,i.aktivitaetenCheckboxListe[n].number_value<3,i.aktivitaetenCheckboxListe[n].number_value>3)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,e.\u0275\u0275pipeBind1(3,4,i.aktivitaetenCheckboxListe[n].number_value))," ")}}function j(o,t){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ion-range",15),e.\u0275\u0275listener("ionChange",function(s){e.\u0275\u0275restoreView(n);const u=e.\u0275\u0275nextContext().index,c=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(c.onValueChange(s,u))}),e.\u0275\u0275element(2,"ion-icon",16)(3,"ion-icon",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=e.\u0275\u0275nextContext().index,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("value",i.aktivitaetenCheckboxListe[n].number_value)}}function O(o,t){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ion-item")(2,"ion-label",10),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,F,4,9,"ion-text",11),e.\u0275\u0275template(5,M,4,9,"ion-text",11),e.\u0275\u0275elementStart(6,"ion-checkbox",12),e.\u0275\u0275listener("ionChange",function(s){const c=e.\u0275\u0275restoreView(n).index,v=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(v.onSelectionChange(s,c))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,j,4,1,"ng-container",13),e.\u0275\u0275elementContainerEnd()}if(2&o){const n=t.$implicit,i=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(n.aktivitaet),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.checked&&n.value!==i.translateService.instant("aktivitaet-erfassen-page.entspannung")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.checked&&n.value===i.translateService.instant("aktivitaet-erfassen-page.entspannung")),e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",n.checked)("value",n.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",n.checked)}}function R(o,t){if(1&o&&(e.\u0275\u0275elementStart(0,"form",4)(1,"ion-card",5)(2,"ion-card-header"),e.\u0275\u0275element(3,"ion-img",6),e.\u0275\u0275elementStart(4,"ion-card-title",7),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"ion-card-content")(8,"ion-list"),e.\u0275\u0275template(9,O,8,6,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"ion-textarea",9),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()()()),2&o){const n=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",n.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,4,"aktivitaet")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",n.aktivitaetenCheckboxListe),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(11,6,"aktivitaet-erfassen-page.textarea-placeholder"))}}function G(o,t){if(1&o){const n=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-button",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(n);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSubmit())}),e.\u0275\u0275elementStart(1,"ion-text",19),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()}2&o&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"aktivitaet-erfassen-page.aktivitaeten-speichern")))}class f{constructor(t,n,i,s,u,c,v,g){this.fb=t,this.sqliteService=n,this.detailService=i,this.databaseCrudService=s,this.activatedRoute=u,this.router=c,this.toastService=v,this.translateService=g,this.aktivitaeten=[],this.aktivitaetenCheckboxListe=[{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.sport"),value:this.translateService.instant("aktivitaet-erfassen-page.sport"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.arbeit"),value:this.translateService.instant("aktivitaet-erfassen-page.arbeit"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.hausarbeit"),value:this.translateService.instant("aktivitaet-erfassen-page.hausarbeit"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.entspannung"),value:this.translateService.instant("aktivitaet-erfassen-page.entspannung"),number_value:null,checked:!1}],this.tagId=this.activatedRoute.snapshot.params.tagId,this.form=this.fb.group({aktivitaetenCheckboxListe:this.fb.array([]),aktivitaetenListe:[""],sportValue:null,arbeitValue:null,hausarbeitValue:null,entspannungValue:null}),this.onLoadCheckboxStatus()}ngOnInit(){}ngAfterViewInit(){var t=this;return(0,b.Z)(function*(){yield t.loadAktivitaeten()})()}onLoadCheckboxStatus(){const t=this.form.get("aktivitaetenCheckboxListe");this.aktivitaetenCheckboxListe.forEach(n=>{this.updateCheckControl(t,n)})}loadAktivitaeten(){this.databaseCrudService.getAktivitaetenListbyTagId(this.tagId).then(t=>{var n,i,s,u,c,v,g,I,V,L,S,y;t.values&&(t&&Array.isArray(t.values)&&null!==(n=t.values[0])&&void 0!==n&&n.aktivitaetenNames&&(this.aktivitaetenNameListe=null===(s=t.values[0])||void 0===s?void 0:s.aktivitaetenNames,this.form.patchValue({aktivitaetenListe:this.aktivitaetenNameListe})),t&&Array.isArray(t.values)&&null!==(i=t.values[0])&&void 0!==i&&i.aktivitaetenNamesCheckboxes&&(this.aktivitaetenCheckboxListe[0].number_value=null===(u=t.values[0])||void 0===u?void 0:u.sportValue,this.aktivitaetenCheckboxListe[1].number_value=null===(c=t.values[0])||void 0===c?void 0:c.arbeitValue,this.aktivitaetenCheckboxListe[2].number_value=null===(v=t.values[0])||void 0===v?void 0:v.hausarbeitValue,this.aktivitaetenCheckboxListe[3].number_value=null===(g=t.values[0])||void 0===g?void 0:g.entspannungValue,this.form.patchValue({sportValue:null===(I=t.values[0])||void 0===I?void 0:I.sportValue,arbeitValue:null===(V=t.values[0])||void 0===V?void 0:V.arbeitValue,hausarbeitValue:null===(L=t.values[0])||void 0===L?void 0:L.hausarbeitValue,entspannungValue:null===(S=t.values[0])||void 0===S?void 0:S.entspannungValue}),this.aktivitaetenCheckboxListeArray=null===(y=t.values[0])||void 0===y?void 0:y.aktivitaetenNamesCheckboxes.split(","),this.aktivitaetenCheckboxListeArray.forEach(A=>{if(this.aktivitaetenCheckboxListe.find(E=>E.aktivitaet===A)){const E=this.aktivitaetenCheckboxListe.findIndex(U=>U.aktivitaet===A);this.aktivitaetenCheckboxListe[E].checked=!0}})));return this.aktivitaetenNameListe}).catch(t=>{console.error("loadAktivitaeten error",JSON.stringify(t)),this.toastService.showErrorToast(this.translateService.instant("aktivitaet-erfassen-page.error"))})}updateAktivitaeten(){this.databaseCrudService.updateAktivitaetenNames(this.tagId,this.form.value.aktivitaetenListe,this.form.value.aktivitaetenCheckboxListe,this.form.value.sportValue,this.form.value.arbeitValue,this.form.value.hausarbeitValue,this.form.value.entspannungValue).then(t=>{var n,i,s,u,c,v;return t.values&&(this.aktivitaetenNameListe=null===(n=t.values[0])||void 0===n?void 0:n.aktivitaetenNames,this.aktivitaetenCheckboxListe=null===(i=t.values[0])||void 0===i?void 0:i.aktivitaetenNamesCheckboxes,this.form.patchValue({aktivitaetenListe:this.aktivitaetenNameListe,sportValue:null===(s=t.values[0])||void 0===s?void 0:s.sportValue,arbeitValue:null===(u=t.values[0])||void 0===u?void 0:u.arbeitValue,hausarbeitValue:null===(c=t.values[0])||void 0===c?void 0:c.hausarbeitValue,entspannungValue:null===(v=t.values[0])||void 0===v?void 0:v.entspannungValue})),this.toastService.showSuccessToast(this.translateService.instant("aktivitaet-erfassen-page.success")),this.aktivitaetenNameListe}).catch(t=>{console.error("updateAktivitaeten error",JSON.stringify(t)),this.toastService.showErrorToast(this.translateService.instant("aktivitaet-erfassen-page.error"))})}onSelectionChange(t,n){const i=this.form.get("aktivitaetenCheckboxListe");this.aktivitaetenCheckboxListe[n].checked=t.target.checked,this.updateCheckControl(i,t.target)}updateCheckControl(t,n){n.checked?t.push(new l.UntypedFormControl(n.value)):t.controls.forEach((i,s)=>{i.value!==n.value||t.removeAt(s)})}onValueChange(t,n){switch(this.aktivitaetenCheckboxListe[n].number_value=t.detail.value,n){case 0:return this.form.patchValue({sportValue:this.aktivitaetenCheckboxListe[n].number_value});case 1:return this.form.patchValue({arbeitValue:this.aktivitaetenCheckboxListe[n].number_value});case 2:return this.form.patchValue({hausarbeitValue:this.aktivitaetenCheckboxListe[n].number_value});case 3:return this.form.patchValue({entspannungValue:this.aktivitaetenCheckboxListe[n].number_value});default:throw Error("Invalider case")}}onSubmit(){var t=this;return(0,b.Z)(function*(){yield t.updateAktivitaeten(),yield t.loadAktivitaeten(),yield t.router.navigateByUrl("/tabs/tagebuch-timeline")})()}}f.\u0275fac=function(t){return new(t||f)(e.\u0275\u0275directiveInject(l.UntypedFormBuilder),e.\u0275\u0275directiveInject(P.Y),e.\u0275\u0275directiveInject(T.X),e.\u0275\u0275directiveInject(w.y),e.\u0275\u0275directiveInject(h.gz),e.\u0275\u0275directiveInject(h.F0),e.\u0275\u0275directiveInject(B.L),e.\u0275\u0275directiveInject(C.sK))},f.\u0275cmp=e.\u0275\u0275defineComponent({type:f,selectors:[["app-aktivitaeten-erfassen"]],decls:13,vars:5,consts:[["slot","start"],[3,"formGroup",4,"ngIf"],[1,"ion-no-border"],["class","m-0 p-0 h-3 w-100 opacity-80","color","primary","expand","block","fill","clear","size","default",3,"click",4,"ngIf"],[3,"formGroup"],[1,"ion-flex-grow-1"],["src","assets/images/Fitness_Flatline.svg",1,"vh-25"],[1,"w-100"],[4,"ngFor","ngForOf"],["formControlName","aktivitaetenListe","id","aktivitaetenListe","required","","type","text",1,"w-100","ion-border",3,"placeholder"],[1,"pt-font-12"],["class","ion-text-end pt-font-12 pt-bold",3,"ngClass",4,"ngIf"],["slot","end",3,"checked","value","ionChange"],[4,"ngIf"],[1,"ion-text-end","pt-font-12","pt-bold",3,"ngClass"],["min","1","max","5","step","1","pin","","ticks","","snaps","",1,"pt-range-padding",3,"value","ionChange"],["slot","start","color","danger","name","sad"],["slot","end","color","secondary","name","happy"],["color","primary","expand","block","fill","clear","size","default",1,"m-0","p-0","h-3","w-100","opacity-80",3,"click"],[1,"small","pt-button-text"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.\u0275\u0275element(3,"ion-back-button"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"ion-content"),e.\u0275\u0275template(8,R,12,8,"form",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"ion-footer",2)(10,"ion-row")(11,"ion-col"),e.\u0275\u0275template(12,G,4,3,"ion-button",3),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,3,"aktivitaet-erfassen")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.form),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.form))},dependencies:[d.NgClass,d.NgForOf,d.NgIf,l.\u0275NgNoValidate,l.NgControlStatus,l.NgControlStatusGroup,l.RequiredValidator,a.IonBackButton,a.IonButton,a.IonButtons,a.IonCard,a.IonCardContent,a.IonCardHeader,a.IonCardTitle,a.IonCheckbox,a.IonCol,a.IonContent,a.IonFooter,a.IonHeader,a.IonIcon,a.IonImg,a.IonItem,a.IonLabel,a.IonList,a.IonRange,a.IonRow,a.IonText,a.IonTextarea,a.IonTitle,a.IonToolbar,a.BooleanValueAccessor,a.SelectValueAccessor,a.TextValueAccessor,a.IonBackButtonDelegate,l.FormGroupDirective,l.FormControlName,C.X$,p],styles:["#ion-source[_ngcontent-%COMP%]{font-size:10px;color:#d3d3d3;line-height:1!important}.pt-range-padding[_ngcontent-%COMP%]{padding:0 60px 20px 15px!important}"]});const z=[{path:"",component:f}];class k{}k.\u0275fac=function(t){return new(t||k)},k.\u0275mod=e.\u0275\u0275defineNgModule({type:k}),k.\u0275inj=e.\u0275\u0275defineInjector({imports:[h.Bz.forChild(z),h.Bz]});var D=r(1511);class m{}m.\u0275fac=function(t){return new(t||m)},m.\u0275mod=e.\u0275\u0275defineNgModule({type:m}),m.\u0275inj=e.\u0275\u0275defineInjector({providers:[p],imports:[d.CommonModule,l.FormsModule,a.IonicModule,k,C.aw,l.ReactiveFormsModule,D.m]})},1511:(N,x,r)=>{r.d(x,{m:()=>a});var d=r(6895),l=r(6738);class a{}a.\u0275fac=function(b){return new(b||a)},a.\u0275mod=l.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=l.\u0275\u0275defineInjector({imports:[d.CommonModule]})}}]);