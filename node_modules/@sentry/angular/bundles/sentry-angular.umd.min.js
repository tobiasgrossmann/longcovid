!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@sentry/browser"),require("@angular/core"),require("@sentry/utils"),require("@angular/common/http"),require("@angular/router"),require("rxjs"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@sentry/angular",["exports","@sentry/browser","@angular/core","@sentry/utils","@angular/common/http","@angular/router","rxjs","rxjs/operators"],t):t(((r="undefined"!=typeof globalThis?globalThis:r||self).sentry=r.sentry||{},r.sentry.angular={}),r.Sentry,r.ng.core,r.Sentry.util,r.ng.common.http,r.ng.router,r.rxjs,r.rxjs.operators)}(this,(function(r,t,n,e,o,i,a,s){"use strict";function u(r){if(r&&r.__esModule)return r;var t=Object.create(null);return r&&Object.keys(r).forEach((function(n){if("default"!==n){var e=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,e.get?e:{enumerable:!0,get:function(){return r[n]}})}})),t.default=r,Object.freeze(t)}var c=u(t),p=u(n),f=u(i),g="ui.angular.init",l="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;var d="undefined"!=typeof Zone&&!!Zone.current;function h(r){return d?Zone.root.run(r):r()}function v(r){if(r instanceof Error)return!0;if(null===r||"object"!=typeof r)return!1;var t=r;return e.isString(t.name)&&e.isString(t.name)&&e.isString(t.message)&&(void 0===t.stack||e.isString(t.stack))}var y,m,_,b=function(){function r(r){this._options=Object.assign({logErrors:!0},r)}return r.prototype.handleError=function(r){var n=this._extractError(r)||"Handled unknown error",o=h((function(){return t.captureException(n,(function(r){return r.addEventProcessor((function(r){return e.addExceptionMechanism(r,{type:"angular",handled:!1}),r})),r}))}));this._options.logErrors&&console.error(n),this._options.showDialog&&c.showReportDialog(Object.assign(Object.assign({},this._options.dialogOptions),{eventId:o}))},r.prototype._extractError=function(r){if(this._options.extractor){var t=this._defaultExtractor.bind(this);return this._options.extractor(r,t)}return this._defaultExtractor(r)},r.prototype._defaultExtractor=function(r){var t=function(r){return r&&r.ngOriginalError?r.ngOriginalError:r}(r);return t instanceof o.HttpErrorResponse?function(r){return v(r.error)?r.error:r.error instanceof ErrorEvent&&r.error.message?r.error.message:"string"==typeof r.error?"Server returned code "+r.status+' with body "'+r.error+'"':r.message}(t):"string"==typeof t||v(t)?t:null},r}();function S(r,n,e){void 0===n&&(n=!0),void 0===e&&(e=!0),y=!0,m=r,_=e,n&&t.WINDOW&&t.WINDOW.location&&r({name:t.WINDOW.location.pathname,op:"pageload",metadata:{source:"url"}})}b.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new b(p.ɵɵinject("errorHandlerOptions"))},token:b,providedIn:"root"}),b.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],b.ctorParameters=function(){return[{type:void 0,decorators:[{type:n.Inject,args:["errorHandlerOptions"]}]}]};var E=S;function O(){var r=t.getCurrentHub();if(r){var n=r.getScope();if(n)return n.getTransaction()}}var j=function(){function r(r){var t=this;this._router=r,this.navStart$=this._router.events.pipe(s.filter((function(r){return r instanceof i.NavigationStart})),s.tap((function(r){if(y){var n=e.stripUrlQueryAndFragment(r.url),o=O();!o&&_&&(o=m({name:n,op:"navigation",metadata:{source:"url"}})),o&&(t._routingSpan&&t._routingSpan.finish(),t._routingSpan=o.startChild({description:""+r.url,op:"ui.angular.routing",tags:Object.assign({"routing.instrumentation":"@sentry/angular",url:n},r.navigationTrigger&&{navigationTrigger:r.navigationTrigger})}))}else l&&e.logger.error("Angular integration has tracing enabled, but Tracing integration is not configured")}))),this.resEnd$=this._router.events.pipe(s.filter((function(r){return r instanceof i.ResolveEnd})),s.tap((function(r){var t=D(r.state.root),n=O();n&&"url"===n.metadata.source&&n.setName(t,"route")}))),this.navEnd$=this._router.events.pipe(s.filter((function(r){return r instanceof i.NavigationEnd})),s.tap((function(){t._routingSpan&&(h((function(){t._routingSpan.finish()})),t._routingSpan=null)}))),this._routingSpan=null,this._subscription=new a.Subscription,this._subscription.add(this.navStart$.subscribe()),this._subscription.add(this.resEnd$.subscribe()),this._subscription.add(this.navEnd$.subscribe())}return r.prototype.ngOnDestroy=function(){this._subscription.unsubscribe()},r}();j.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new j(p.ɵɵinject(f.Router))},token:j,providedIn:"root"}),j.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],j.ctorParameters=function(){return[{type:Router}]};var I=function(){function r(){}return r.prototype.ngOnInit=function(){this.componentName||(this.componentName="unknown");var r=O();r&&(this._tracingSpan=r.startChild({description:"<"+this.componentName+">",op:g}))},r.prototype.ngAfterViewInit=function(){this._tracingSpan&&this._tracingSpan.finish()},r}();I.decorators=[{type:n.Directive,args:[{selector:"[trace]"}]}],I.propDecorators={componentName:[{type:n.Input,args:["trace"]}]};var x=function(){};function D(r){var t=r&&r.firstChild&&r.firstChild.routeConfig&&r.firstChild.routeConfig.path;return t?"/"+t+D(r&&r.firstChild):"/"}x.decorators=[{type:n.NgModule,args:[{declarations:[I],exports:[I]}]}],r.SentryErrorHandler=b,r.TraceClassDecorator=function(){var r;return function(t){var n=t.prototype.ngOnInit;t.prototype.ngOnInit=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];var i=O();if(i&&(r=i.startChild({description:"<"+t.name+">",op:g})),n)return n.apply(this,e)};var e=t.prototype.ngAfterViewInit;t.prototype.ngAfterViewInit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(r&&r.finish(),e)return e.apply(this,t)}}},r.TraceDirective=I,r.TraceMethodDecorator=function(){return function(r,t,n){var o=n.value;return n.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=e.timestampWithMs(),s=O();if(s&&s.startChild({description:"<"+r.constructor.name+">",endTimestamp:a,op:"ui.angular."+String(t),startTimestamp:a}),o)return o.apply(this,n)},n}},r.TraceModule=x,r.TraceService=j,r.createErrorHandler=function(r){return new b(r)},r.getActiveTransaction=O,r.init=function(r){var o;r._metadata=r._metadata||{},r._metadata.sdk={name:"sentry.javascript.angular",packages:[{name:"npm:@sentry/angular",version:t.SDK_VERSION}],version:t.SDK_VERSION},(o=n.VERSION&&n.VERSION.major?parseInt(n.VERSION.major,10):void 0)&&(o<10&&l&&e.logger.warn("The Sentry SDK does not officially support Angular "+o+".","This version of the Sentry SDK supports Angular 10 and above.","Please consider upgrading your Angular version or downgrading the Sentry SDK."),t.setContext("angular",{version:o})),t.init(r)},r.instrumentAngularRouting=E,r.routingInstrumentation=S,Object.keys(t).forEach((function(n){"default"===n||r.hasOwnProperty(n)||Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[n]}})})),Object.defineProperty(r,"__esModule",{value:!0})}));
//# sourceMappingURL=sentry-angular.umd.min.js.map