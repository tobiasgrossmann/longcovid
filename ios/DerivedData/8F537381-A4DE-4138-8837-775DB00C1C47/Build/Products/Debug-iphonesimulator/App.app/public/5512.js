"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5512],{5512:(x,h,r)=>{r.r(h),r.d(h,{AktivitaetenErfassenPageModule:()=>T});var v=r(6895),l=r(4006),i=r(4881),c=r(2905),p=r(5861),e=r(6738),b=r(636),C=r(4323),_=r(535),I=r(1618),k=r(8490);let f=(()=>{class a{transform(t){if(t&&"number"==typeof t)switch(t){case 1:return"sehr wenig";case 2:return"wenig";case 3:return"mittel";case 4:return"viel";case 5:return"sehr-viel";case null:case NaN:return;default:throw Error("Invalider case: "+t)}}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275pipe=e.\u0275\u0275definePipe({name:"aktivitaeten",type:a,pure:!0}),a})();const g=function(a,o){return{ptRed:a,ptGreen:o}};function V(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"ion-text",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"aktivitaeten"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,g,n.aktivitaetenCheckboxListe[t].number_value>3,n.aktivitaetenCheckboxListe[t].number_value<3)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,e.\u0275\u0275pipeBind1(3,4,n.aktivitaetenCheckboxListe[t].number_value))," ")}}function S(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"ion-text",14),e.\u0275\u0275text(1),e.\u0275\u0275pipe(2,"translate"),e.\u0275\u0275pipe(3,"aktivitaeten"),e.\u0275\u0275elementEnd()),2&a){const t=e.\u0275\u0275nextContext().index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275property("ngClass",e.\u0275\u0275pureFunction2(6,g,n.aktivitaetenCheckboxListe[t].number_value<3,n.aktivitaetenCheckboxListe[t].number_value>3)),e.\u0275\u0275advance(1),e.\u0275\u0275textInterpolate1(" ",e.\u0275\u0275pipeBind1(2,2,e.\u0275\u0275pipeBind1(3,4,n.aktivitaetenCheckboxListe[t].number_value))," ")}}function L(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ion-range",15),e.\u0275\u0275listener("ionChange",function(s){e.\u0275\u0275restoreView(t);const u=e.\u0275\u0275nextContext().index,d=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(d.onValueChange(s,u))}),e.\u0275\u0275element(2,"ion-icon",16)(3,"ion-icon",17),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementContainerEnd()}if(2&a){const t=e.\u0275\u0275nextContext().index,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(1),e.\u0275\u0275property("value",n.aktivitaetenCheckboxListe[t].number_value)}}function E(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementContainerStart(0),e.\u0275\u0275elementStart(1,"ion-item")(2,"ion-label",10),e.\u0275\u0275text(3),e.\u0275\u0275elementEnd(),e.\u0275\u0275template(4,V,4,9,"ion-text",11),e.\u0275\u0275template(5,S,4,9,"ion-text",11),e.\u0275\u0275elementStart(6,"ion-checkbox",12),e.\u0275\u0275listener("ionChange",function(s){const d=e.\u0275\u0275restoreView(t).index,m=e.\u0275\u0275nextContext(2);return e.\u0275\u0275resetView(m.onSelectionChange(s,d))}),e.\u0275\u0275elementEnd()(),e.\u0275\u0275template(7,L,4,1,"ng-container",13),e.\u0275\u0275elementContainerEnd()}if(2&a){const t=o.$implicit,n=e.\u0275\u0275nextContext(2);e.\u0275\u0275advance(3),e.\u0275\u0275textInterpolate(t.aktivitaet),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.checked&&t.value!==n.translateService.instant("aktivitaet-erfassen-page.entspannung")),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.checked&&t.value===n.translateService.instant("aktivitaet-erfassen-page.entspannung")),e.\u0275\u0275advance(1),e.\u0275\u0275property("checked",t.checked)("value",t.value),e.\u0275\u0275advance(1),e.\u0275\u0275property("ngIf",t.checked)}}function y(a,o){if(1&a&&(e.\u0275\u0275elementStart(0,"form",4)(1,"ion-card",5)(2,"ion-card-header"),e.\u0275\u0275element(3,"ion-img",6),e.\u0275\u0275elementStart(4,"ion-card-title",7),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()(),e.\u0275\u0275elementStart(7,"ion-card-content")(8,"ion-list"),e.\u0275\u0275template(9,E,8,6,"ng-container",8),e.\u0275\u0275elementEnd(),e.\u0275\u0275element(10,"ion-textarea",9),e.\u0275\u0275pipe(11,"translate"),e.\u0275\u0275elementEnd()()()),2&a){const t=e.\u0275\u0275nextContext();e.\u0275\u0275property("formGroup",t.form),e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,4,"aktivitaet")),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngForOf",t.aktivitaetenCheckboxListe),e.\u0275\u0275advance(1),e.\u0275\u0275propertyInterpolate("placeholder",e.\u0275\u0275pipeBind1(11,6,"aktivitaet-erfassen-page.textarea-placeholder"))}}function A(a,o){if(1&a){const t=e.\u0275\u0275getCurrentView();e.\u0275\u0275elementStart(0,"ion-button",18),e.\u0275\u0275listener("click",function(){e.\u0275\u0275restoreView(t);const s=e.\u0275\u0275nextContext();return e.\u0275\u0275resetView(s.onSubmit())}),e.\u0275\u0275elementStart(1,"ion-text",19),e.\u0275\u0275text(2),e.\u0275\u0275pipe(3,"translate"),e.\u0275\u0275elementEnd()()}2&a&&(e.\u0275\u0275advance(2),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(3,1,"aktivitaet-erfassen-page.aktivitaeten-speichern")))}const P=[{path:"",component:(()=>{class a{constructor(t,n,s,u,d,m,w,B){this.fb=t,this.sqliteService=n,this.detailService=s,this.databaseCrudService=u,this.activatedRoute=d,this.router=m,this.toastService=w,this.translateService=B,this.aktivitaeten=[],this.aktivitaetenCheckboxListe=[{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.sport"),value:this.translateService.instant("aktivitaet-erfassen-page.sport"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.arbeit"),value:this.translateService.instant("aktivitaet-erfassen-page.arbeit"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.hausarbeit"),value:this.translateService.instant("aktivitaet-erfassen-page.hausarbeit"),number_value:null,checked:!1},{aktivitaet:this.translateService.instant("aktivitaet-erfassen-page.entspannung"),value:this.translateService.instant("aktivitaet-erfassen-page.entspannung"),number_value:null,checked:!1}],this.tagId=this.activatedRoute.snapshot.params.tagId,this.form=this.fb.group({aktivitaetenCheckboxListe:this.fb.array([]),aktivitaetenListe:[""],sportValue:null,arbeitValue:null,hausarbeitValue:null,entspannungValue:null}),this.onLoadCheckboxStatus()}ngOnInit(){}ngAfterViewInit(){var t=this;return(0,p.Z)(function*(){yield t.loadAktivitaeten()})()}onLoadCheckboxStatus(){const t=this.form.get("aktivitaetenCheckboxListe");this.aktivitaetenCheckboxListe.forEach(n=>{this.updateCheckControl(t,n)})}loadAktivitaeten(){this.databaseCrudService.getAktivitaetenListbyTagId(this.tagId).then(t=>(t.values&&(t.values[0].aktivitaetenNames&&(this.aktivitaetenNameListe=t.values[0].aktivitaetenNames,this.form.patchValue({aktivitaetenListe:this.aktivitaetenNameListe})),t.values[0].aktivitaetenNamesCheckboxes&&(this.aktivitaetenCheckboxListe[0].number_value=t.values[0].sportValue,this.aktivitaetenCheckboxListe[1].number_value=t.values[0].arbeitValue,this.aktivitaetenCheckboxListe[2].number_value=t.values[0].hausarbeitValue,this.aktivitaetenCheckboxListe[3].number_value=t.values[0].entspannungValue,this.form.patchValue({sportValue:t.values[0].sportValue,arbeitValue:t.values[0].arbeitValue,hausarbeitValue:t.values[0].hausarbeitValue,entspannungValue:t.values[0].entspannungValue}),this.aktivitaetenCheckboxListeArray=t.values[0].aktivitaetenNamesCheckboxes.split(","),this.aktivitaetenCheckboxListeArray.forEach(n=>{if(this.aktivitaetenCheckboxListe.find(s=>s.aktivitaet===n)){const s=this.aktivitaetenCheckboxListe.findIndex(u=>u.aktivitaet===n);this.aktivitaetenCheckboxListe[s].checked=!0}}))),this.aktivitaetenNameListe)).catch(t=>{console.error("loadAktivitaeten error",JSON.stringify(t)),this.toastService.showErrorToast(this.translateService.instant("aktivitaet-erfassen-page.error"))})}updateAktivitaeten(){this.databaseCrudService.updateAktivitaetenNames(this.tagId,this.form.value.aktivitaetenListe,this.form.value.aktivitaetenCheckboxListe,this.form.value.sportValue,this.form.value.arbeitValue,this.form.value.hausarbeitValue,this.form.value.entspannungValue).then(t=>(t.values&&(this.aktivitaetenNameListe=t.values[0].aktivitaetenNames,this.aktivitaetenCheckboxListe=t.values[0].aktivitaetenNamesCheckboxes,this.form.patchValue({aktivitaetenListe:this.aktivitaetenNameListe,sportValue:t.values[0].sportValue,arbeitValue:t.values[0].arbeitValue,hausarbeitValue:t.values[0].hausarbeitValue,entspannungValue:t.values[0].entspannungValue})),this.toastService.showSuccessToast(this.translateService.instant("aktivitaet-erfassen-page.success")),this.aktivitaetenNameListe)).catch(t=>{console.error("updateAktivitaeten error",JSON.stringify(t)),this.toastService.showErrorToast(this.translateService.instant("aktivitaet-erfassen-page.error"))})}onSelectionChange(t,n){const s=this.form.get("aktivitaetenCheckboxListe");this.aktivitaetenCheckboxListe[n].checked=t.target.checked,this.updateCheckControl(s,t.target)}updateCheckControl(t,n){n.checked?t.push(new l.UntypedFormControl(n.value)):t.controls.forEach((s,u)=>{s.value!==n.value||t.removeAt(u)})}onValueChange(t,n){switch(this.aktivitaetenCheckboxListe[n].number_value=t.detail.value,n){case 0:return this.form.patchValue({sportValue:this.aktivitaetenCheckboxListe[n].number_value});case 1:return this.form.patchValue({arbeitValue:this.aktivitaetenCheckboxListe[n].number_value});case 2:return this.form.patchValue({hausarbeitValue:this.aktivitaetenCheckboxListe[n].number_value});case 3:return this.form.patchValue({entspannungValue:this.aktivitaetenCheckboxListe[n].number_value});default:throw Error("Invalider case")}}onSubmit(){var t=this;return(0,p.Z)(function*(){yield t.updateAktivitaeten(),yield t.loadAktivitaeten(),yield t.router.navigateByUrl("/tabs/tagebuch-timeline")})()}}return a.\u0275fac=function(t){return new(t||a)(e.\u0275\u0275directiveInject(l.UntypedFormBuilder),e.\u0275\u0275directiveInject(b.Y),e.\u0275\u0275directiveInject(C.X),e.\u0275\u0275directiveInject(_.y),e.\u0275\u0275directiveInject(c.gz),e.\u0275\u0275directiveInject(c.F0),e.\u0275\u0275directiveInject(I.L),e.\u0275\u0275directiveInject(k.sK))},a.\u0275cmp=e.\u0275\u0275defineComponent({type:a,selectors:[["app-aktivitaeten-erfassen"]],decls:13,vars:5,consts:[["slot","start"],[3,"formGroup",4,"ngIf"],[1,"ion-no-border"],["class","m-0 p-0 h-3 w-100 opacity-80","color","primary","expand","block","fill","clear","size","default",3,"click",4,"ngIf"],[3,"formGroup"],[1,"ion-flex-grow-1"],["src","assets/images/Fitness_Flatline.svg",1,"vh-25"],[1,"w-100"],[4,"ngFor","ngForOf"],["formControlName","aktivitaetenListe","id","aktivitaetenListe","required","","type","text",1,"w-100","ion-border",3,"placeholder"],[1,"pt-font-12"],["class","ion-text-end pt-font-12 pt-bold",3,"ngClass",4,"ngIf"],["slot","end",3,"checked","value","ionChange"],[4,"ngIf"],[1,"ion-text-end","pt-font-12","pt-bold",3,"ngClass"],["min","1","max","5","step","1","pin","","ticks","","snaps","",1,"pt-range-padding",3,"value","ionChange"],["slot","start","color","danger","name","sad"],["slot","end","color","secondary","name","happy"],["color","primary","expand","block","fill","clear","size","default",1,"m-0","p-0","h-3","w-100","opacity-80",3,"click"],[1,"small","pt-button-text"]],template:function(t,n){1&t&&(e.\u0275\u0275elementStart(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),e.\u0275\u0275element(3,"ion-back-button"),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(4,"ion-title"),e.\u0275\u0275text(5),e.\u0275\u0275pipe(6,"translate"),e.\u0275\u0275elementEnd()()(),e.\u0275\u0275elementStart(7,"ion-content"),e.\u0275\u0275template(8,y,12,8,"form",1),e.\u0275\u0275elementEnd(),e.\u0275\u0275elementStart(9,"ion-footer",2)(10,"ion-row")(11,"ion-col"),e.\u0275\u0275template(12,A,4,3,"ion-button",3),e.\u0275\u0275elementEnd()()()),2&t&&(e.\u0275\u0275advance(5),e.\u0275\u0275textInterpolate(e.\u0275\u0275pipeBind1(6,3,"aktivitaet-erfassen")),e.\u0275\u0275advance(3),e.\u0275\u0275property("ngIf",n.form),e.\u0275\u0275advance(4),e.\u0275\u0275property("ngIf",n.form))},dependencies:[v.NgClass,v.NgForOf,v.NgIf,l.\u0275NgNoValidate,l.NgControlStatus,l.NgControlStatusGroup,l.RequiredValidator,i.IonBackButton,i.IonButton,i.IonButtons,i.IonCard,i.IonCardContent,i.IonCardHeader,i.IonCardTitle,i.IonCheckbox,i.IonCol,i.IonContent,i.IonFooter,i.IonHeader,i.IonIcon,i.IonImg,i.IonItem,i.IonLabel,i.IonList,i.IonRange,i.IonRow,i.IonText,i.IonTextarea,i.IonTitle,i.IonToolbar,i.BooleanValueAccessor,i.SelectValueAccessor,i.TextValueAccessor,i.IonBackButtonDelegate,l.FormGroupDirective,l.FormControlName,k.X$,f],styles:["#ion-source[_ngcontent-%COMP%]{font-size:10px;color:#d3d3d3;line-height:1!important}.pt-range-padding[_ngcontent-%COMP%]{padding:0 60px 20px 15px!important}"]}),a})()}];let N=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({imports:[c.Bz.forChild(P),c.Bz]}),a})();var M=r(1511);let T=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=e.\u0275\u0275defineInjector({providers:[f],imports:[v.CommonModule,l.FormsModule,i.IonicModule,N,k.aw,l.ReactiveFormsModule,M.m]}),a})()},1511:(x,h,r)=>{r.d(h,{m:()=>i});var v=r(6895),l=r(6738);let i=(()=>{class c{}return c.\u0275fac=function(e){return new(e||c)},c.\u0275mod=l.\u0275\u0275defineNgModule({type:c}),c.\u0275inj=l.\u0275\u0275defineInjector({imports:[v.CommonModule]}),c})()}}]);